/* The sidebar
*/
@mixin with-sidebar {
  main {
    @include fixed-sidebar;
    
    #articles {
      @include block;
      
      @include small-screen-and-up {
        @include col-nm(2, 3);
      }
    }
    
    aside { 
      @include block;
      margin-top: $margin*2;
      
      @include small-screen-and-up {
        @include col-nm(1, 3);
        margin-right: 0;
        margin-top: 0
      }
      @include sidebar;
    }
  }
}


/* The sidebar
*/
@mixin sidebar {
  section {
    margin-bottom: $margin;
    
    h3 {
      display: block;
      @include font(section-title);
    }
    
    article {
      @include article-style(thumb-left);
      @include article-style(thumb-left-smaller);
      
      @include below-small-screen {
        @include responsive-grid(2, 20);
      }
      
      @include mobile {
        @include block;
      }
      
      @include small-screen-and-up {
        @include block;
      }
    }
    
  }
  
  #spacer {
    @include hide-title;
  }
}



/* Fixed sidebar
*/
@mixin fixed-sidebar {
  @include small-screen-and-up {
    overflow: hidden;
    
    aside {
      #spacer {
        margin-bottom: -$pad*2000;
        padding-bottom: $pad*2000;
        @include color(slider);
      }
    }
  }
}









/* The Archives 
*/
@mixin archive($type: default) {
  .title {
    @include font(section-title);
    @include font(category-title);
  }
  
  @include pagination(navigation);
  
  
  @if ($type == default) {
    article {
      @include responsive-grid(5, 20);
      @include article-style(projects);
      @include article-style(archive);
      
      @include mobile {
        @include block;
        @include article-style(thumb-left);
      }
    }
  
  } @elseif ($type == category) {
    /* The first article
    */
    aside {
      @include article-style(first-article-in-archive);
    }
    
    /* The rest of the articles
    */
    article {
      &.thumb {
        @include below-small-screen {
          @include article-style(thumb-left);
          @include responsive-grid(2, 20);
        }
        
        @include small-screen-and-up {
          @include article-style(projects);
          @include responsive-grid(3, 20);
        }
        
        @include mobile {
          @include block;
        }
      }
    }
  
  } @elseif ($type == blog) {
    article {
      @include article-style(blog-archive);
      
      @include mobile {
        @include block;
        @include article-style(thumb-left);
      }
    }
  
  } @elseif ($type == gallery) {
    article {
      @include responsive-grid(3, 20);
      height: auto;
    }
  }
}




/* An article with thumb left, the rest right
*/
@mixin article-thumb-left($gutter, $padding: 0) {
  figure, h1, .excerpt {
    @include col-by-gutter(2, $gutter);
  }
  
  h1, .excerpt {
    margin-right: 0;
    @include padding(col-by-gutter-width(2, $gutter), $padding);
  }
}
